const t=1e4,e=(e,s,r,n)=>o=>{const{pitch:i,length:a}=o||{pitch:0,length:1};let c=0;const h=2**((i-12*e)/12)*1.24,l=Math.pow(.9999,2/a);return()=>{if(0===i)return 0;if(++c,c>=a*t)return;const e=c>a*t*s?Math.pow(l,c-a*t*s):1;return n(c,h)*e*r}},s=e(0,.4,.3,(t,e)=>(t*e/2&202)/120-.75),r=(e(-1,.4,.3,(t,e)=>(t*e/2&512)/120-.75),e(4,.1,2,(t,e)=>Math.tan(Math.cbrt(Math.sin(t*e/30))))),n=t=>{const e=t.split(",").reduce((t,e)=>{const[s,r]=e.split("~");return(parseInt(r)||1)+t},0),s=Array.from({length:e});let r=0;return t.split(",").forEach(t=>{const[e,n]=t.split("~"),o=isNaN(parseInt(n))?1:parseInt(n);s[r]={pitch:isNaN(parseInt(e))?0:parseInt(e),length:o},r+=o}),{t:s,o:e}},o={i:s,...n("27~6,26~1,27~1,29~1,27~1,26~1,24~1,27~2,27~1,24~1,27~6,26~1,27~1,24~1,22~1,19~1,20~1,22~9,20~1,19~1,17~1,19~1,20~1,22~1,24~1,22~9,24~1,26~1,24~1,22~1,20~1,19~1,17~1,19~1,17~1,15~4,15~1,17~1,19~1,~1,20~1,~1,17~4,22~17,~3,29~7,27~1,26~1,24~1,26~1,27~1,29~1,27~1,26~3,27~1,26~1,24~1,27~1,26~1,24~1,20~3,20~1,20~1,20~1,~1,24~1,~1,27~1,24~1,26~1,22~1,20~2,20~1,20~1,20~1,~1,24~1,~1,26~1,22~1,24~1,20~1,17~2,17~1,15~1,17~6,17~1,17~1,17~1,~1,20~1,~1,24~1,20~1,22~1,19~1,17~2,17~1,15~1,17~6,17~1,15~1,17~2,19~1,20~1,22~9,20~1,19~1,17~1,15~2,22~1,22~1,22~1,~1,22~1,22~1,22~1,~1,22~1,~1,22~1,~1,22~1,22~1,22~1,~1,22~1,22~1,22~1,22~1,22~1,22~1,22~1")},i={i:r,...n("10~4,22~4,10~4,10~4,22~4,10~2,10~2,".repeat(8).slice(0,-1))};let a=[{i:r,...n("10~4,22~4,10~4,10~4,22~4,10~2,10~2")}],c=[];const h=(e,s,r)=>{e=Math.round(e*s),e|=0;let n=0;for(let s of r){let r=0;for(let n=0;s.t.length>n;n++){const o=s.t[n];if(!o)continue;const i=o.length*t;if(e===r){const t=s.i(o);c.push(t)}if(r+=i,r>e)break}}for(let t=0;c.length>t;++t){let e=c[t]();void 0!==e?n+=e:c.splice(t--,1)}return n/8};class l extends AudioWorkletProcessor{h=!1;paused=!1;playbackRate=1;l=0;u=128;sampleCount=a[0].o*t;constructor(){super(),this.port.onmessage=t=>{const{name:e}=t.data;switch(e){case"start":this.h=!0;break;case"pause":this.paused=!0;break;case"unpause":this.paused=!1}}}process(e,s,r){if(this.paused)return s[0][0].fill(0),!0;const n=s[0][0],c=this.l,l=this.l+this.u;for(let t=c;l>t;t++)n[t-c]=h(t,this.playbackRate,a);return this.l=l,this.l>this.sampleCount/this.playbackRate&&(this.l=0,this.h&&(a=[o,i],this.sampleCount=a[0].o*t)),!0}}registerProcessor("music-processor",l);