const t=1e4,e=(e,r,s,h)=>o=>{const{pitch:n,length:a}=o||{pitch:0,length:1};let m=0;const i=2**((n-12*e)/12)*1.24,c=Math.pow(.9999,2/a);return()=>{if(0===n)return 0;if(++m,m>=a*t)return;const e=m>a*t*r?Math.pow(c,m-a*t*r):1;return h(m,i)*e*s}},r=e(0,.4,.3,(t,e)=>(t*e/2&202)/120-.75),s=(e(-1,.4,.3,(t,e)=>(t*e/2&512)/120-.75),e(4,.1,2,(t,e)=>Math.tan(Math.cbrt(Math.sin(t*e/30))))),h=t=>{const e=t.split(",").reduce((t,e)=>{const[r,s]=e.split("");return(parseInt(s)||1)+t},0),r=Array.from({length:e});let s=0;return t.split(",").forEach(t=>{const[e,h]=t.split(""),o=parseInt(e,32),n=isNaN(parseInt(h))?1:parseInt(h);r[s]={pitch:isNaN(o)?0:o,length:n},s+=n}),{t:r,h:e}},o={o:r,...h("r6,q1,r1,t1,r1,q1,o1,r2,r1,o1,r6,q1,r1,o1,m1,j1,k1,m9,k1,j1,h1,j1,k1,m1,o1,m9,o1,q1,o1,m1,k1,j1,h1,j1,h1,f4,f1,h1,j1,~1,k1,~1,h4,mh,~3,t7,r1,q1,o1,q1,r1,t1,r1,q3,r1,q1,o1,r1,q1,o1,k3,k1,k1,k1,~1,o1,~1,r1,o1,q1,m1,k2,k1,k1,k1,~1,o1,~1,q1,m1,o1,k1,h2,h1,f1,h6,h1,h1,h1,~1,k1,~1,o1,k1,m1,j1,h2,h1,f1,h6,h1,f1,h2,j1,k1,m9,k1,j1,h1,f2,m1,m1,m1,~1,m1,m1,m1,~1,m1,~1,m1,~1,m1,m1,m1,~1,m1,m1,m1,m1,m1,m1,m1")},n={o:s,...h("a4,m4,a4,a4,m4,a2,a2,".repeat(8).slice(0,-1))};let a=[{o:s,...h("a4,m4,a4,a4,m4,a2,a2")}],m=[];const i=(e,r,s)=>{e=Math.round(e*r),e|=0;let h=0;for(let r of s){let s=0;for(let h=0;r.t.length>h;h++){const o=r.t[h];if(!o)continue;const n=o.length*t;if(e===s){const t=r.o(o);m.push(t)}if(s+=n,s>e)break}}for(let t=0;m.length>t;++t){let e=m[t]();void 0!==e?h+=e:m.splice(t--,1)}return h/8};class c extends AudioWorkletProcessor{m=!1;paused=!1;playbackRate=1;i=0;k=128;sampleCount=a[0].h*t;constructor(){super(),this.port.onmessage=t=>{const{name:e}=t.data;switch(e){case"start":this.m=!0;break;case"pause":this.paused=!0;break;case"unpause":this.paused=!1}}}process(e,r,s){if(this.paused)return r[0][0].fill(0),!0;const h=r[0][0],m=this.i,c=this.i+this.k;for(let t=m;c>t;t++)h[t-m]=i(t,this.playbackRate,a);return this.i=c,this.i>this.sampleCount/this.playbackRate&&(this.i=0,this.m&&(a=[o,n],this.sampleCount=a[0].h*t)),!0}}registerProcessor("music-processor",c);