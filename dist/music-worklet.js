function t(t){let e=0;const i=2**(t/12)/1.24;return()=>{let t=Math.tan(Math.cbrt(Math.sin(e*i/30)));if(++e,s>e)return t*Math.pow(.9999,2*e)*.2}}const s=44e3,e=t=>t.split(",").map(t=>t.split(" ").flatMap(t=>isNaN(parseInt(t))?[]:[parseInt(t)])),i="11 -1 11,,11 15 18,,-9 3,,11 15 18,,-2 10,,18 13 10 10,,3 -9,,18 13 10 10,,",h="10 -2 10,,13 9 4,,3 -9,,9 13 4,,3 -9,,10 13 6,,4 -8,,-6 6 10 13,",o=`${i}${i}${i}${h},11 -1,,11 15 18,,-9 3,,11 15 18,,-2 10,,18 13 10 10,,3 -9,,18 13 10 10,,${i}${i}${h}`,r={t(t){let s=0;const e=2**(t/12)*1.24;return()=>{let t=(s*e/2&128)/96-.75;if(++s,8800>s)return.2*t*Math.pow(.99985,s)}},i:e(`${o},${o},,,`)},n="17,18 6,19 7,20 8,21 9,,22 10,,23 11,,24 12,,25 13,,26 14,,27 15 26,,27 15 26,,27 15 26,,",c="27 15 26,,27 15 26,,26 14,,25 13,,24 12,,5",a={t,i:e(`5 9 ${n} ${c} ${n} 26 15,,27 26 15,,27 26 15,,28 16,,28 16,,5 ${n} ${c} 17,18 6,19 7,20 8,21 9,,22 10,22 10,23 11,,24 12,,25 13,,26 14,,27 15 26,,27 15 26,,27 15 26,,27 26 15,,28 16,,28 16,,28 16,,28 16,,5 17 22 29,,5 17 20 29,,,,5 17 21 29,,0 12 21 29,,4 21 16 28,,3 21 15 27,,2 21 14 26,,4 12 24,,2 14 26,,1 13 25,,0 12 24,,3 -1 11 23,,0 12 24,,-2 10 22,,-2 10 22,,29 24 21 19 14,,29 21 19 14 24,,,,29 21 19 14,,29 14 19 21,,28 21 17 12,,27 21 16 11,,26 21 14,,-6 18,29 17,16 28,27 15,26 14,25 13,24 12,23 11,22 10,21 9,20 8,19 7,18 6,17 5,16 4,15 3,17 28 29,,17 29,,17 29,,17 29,,17 29,,28 15,,27 14,,26 13,,25 12,,24 11,,23 10,,22 9,,21 8,,22 10,,23 11,,24 12,,12 17 28 29 5,,28 17 12 5 29 24,,28 26 17 12 5 29,,28 17 12 5 29,,28 17 12 5 29,,4 16 28,,27 15,,26 14,,25 13,,,,19 8,,6,,5 17,,,,14,,,`)},l={t,i:e("17 29,30 18,31 19,32 20,33 21,34 22,23 35,36 24")};let $=[a,r],u=[];const f=5500,p=(t,s,e)=>{t=Math.round(t*s);let i=0;if((t|=0)%f==0)for(let s of e)if(void 0!==s.i[t/f]){const e=s.i[t/f];for(let t of e)u.push(s.t(t))}for(let t=0;u.length>t;++t){let s=u[t]();void 0!==s?i+=s:u.splice(t,1)}return i/8};class d extends AudioWorkletProcessor{h=!1;playbackRate=1;state=0;constructor(){super(),this.o=0,this.l=128,this.sampleCount=a.i.length*s/8,this.port.onmessage=this.$.bind(this)}$(t){const s=t.data;"speed-up"===s.name&&(this.h=!0,this.o=0),"voices"===s.name&&(s.high&&1===this.state?this.state=2:s.high||(this.state=1,$=[r]))}process(t,s,e){const i=s[0][0],h=this.o,o=this.o+this.l;for(let t=h;o>t;t++)i[t-h]=p(t,this.playbackRate,this.h?[l]:$);this.o=o;const n=this.sampleCount/this.playbackRate;return this.o>n&&(this.o=0),0!==this.o&&n/4>this.o||2!==this.state||(this.o=0,this.state=0,$=[a,r]),!0}}registerProcessor("music-processor",d);